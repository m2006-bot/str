<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>الجدول الذكي</title>
  <style>
    :root {
      --ios-blue: #007aff;
      --ios-green: #34c759;
      --ios-orange: #ff9500;
      --ios-bg: #f2f2f7;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: var(--ios-bg);
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
      padding: 0 10px 15px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    #topStatusBar {
      height: 5px;
      width: 100%;
      background: #e5e5ea;
      position: sticky;
      top: 0;
      z-index: 10;
      border-radius: 0 0 4px 4px;
      transition: background-color 0.5s ease;
    }

    .time-now {
      font-size: 12px;
      color: #8e8e93;
      text-align: center;
      margin-top: 5px;
    }

    .header {
      text-align: center;
      margin: 4px 0;
    }

    .header h1 {
      font-size: 20px;
      font-weight: 700;
      color: #1c1c1e;
    }

    /* الكرت النحيف */
    .session-card {
      display: flex;
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 1px 2px rgba(0,0,0,0.03);
      height: 38px;
      align-items: center;
    }

    .color-strip {
      width: 4px;
      height: 100%;
    }

    .study-strip { background: var(--ios-blue); }
    .break-strip { background: var(--ios-green); }
    .special-strip { background: var(--ios-orange); }
    .dinner-strip { background: #000; }

    .session-info {
      flex: 1;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 12px;
    }

    .time-range {
      font-weight: 600;
      font-size: 11px;
      color: #3a3a3c;
      min-width: 80px;
      text-align: left;
    }

    .session-title {
      font-size: 13px;
      font-weight: 500;
      color: #1d1d1f;
    }

    /* تمييز الجلسة الحالية */
    .session-card.current {
      background: #fff;
      border: 1px solid rgba(0,122,255,0.4);
      box-shadow: 0 2px 8px rgba(0,122,255,0.1);
    }

    .session-card.current .session-title {
      color: var(--ios-blue);
      font-weight: 700;
    }

    .dinner-card { background: #1c1c1e; }
    .dinner-card .time-range, .dinner-card .session-title { color: white; }
  </style>
</head>
<body>

  <div id="topStatusBar"></div>
  <div class="time-now" id="nowText">الوقت الآن — --:--</div>
  
  <div class="header">
    <h1>الخميس</h1>
  </div>

  <div class="session-card" data-start="11:00" data-end="11:40" data-type="study"><div class="color-strip study-strip"></div><div class="session-info"><div class="time-range">11:00 - 11:40</div><div class="session-title">دراسة</div></div></div>
  <div class="session-card" data-start="11:40" data-end="11:48" data-type="break"><div class="color-strip break-strip"></div><div class="session-info"><div class="time-range">11:40 - 11:48</div><div class="session-title">استراحة</div></div></div>
  <div class="session-card" data-start="11:48" data-end="12:28" data-type="study"><div class="color-strip study-strip"></div><div class="session-info"><div class="time-range">11:48 - 12:28</div><div class="session-title">دراسة</div></div></div>
  <div class="session-card" data-start="12:28" data-end="12:30" data-type="break"><div class="color-strip break-strip"></div><div class="session-info"><div class="time-range">12:28 - 12:30</div><div class="session-title">استراحة قصيرة</div></div></div>
  <div class="session-card" data-start="12:30" data-end="13:30" data-type="special"><div class="color-strip special-strip"></div><div class="session-info"><div class="time-range">12:30 - 01:30</div><div class="session-title">غداء + راحة</div></div></div>
  
  <div class="session-card" data-start="13:30" data-end="14:10" data-type="study"><div class="color-strip study-strip"></div><div class="session-info"><div class="time-range">01:30 - 02:10</div><div class="session-title">دراسة</div></div></div>
  <div class="session-card" data-start="14:10" data-end="14:18" data-type="break"><div class="color-strip break-strip"></div><div class="session-info"><div class="time-range">02:10 - 02:18</div><div class="session-title">استراحة</div></div></div>
  <div class="session-card" data-start="14:18" data-end="14:58" data-type="study"><div class="color-strip study-strip"></div><div class="session-info"><div class="time-range">02:18 - 02:58</div><div class="session-title">دراسة</div></div></div>
  <div class="session-card" data-start="14:58" data-end="15:06" data-type="break"><div class="color-strip break-strip"></div><div class="session-info"><div class="time-range">02:58 - 03:06</div><div class="session-title">استراحة</div></div></div>
  <div class="session-card" data-start="15:06" data-end="15:46" data-type="study"><div class="color-strip study-strip"></div><div class="session-info"><div class="time-range">03:06 - 03:46</div><div class="session-title">دراسة</div></div></div>
  <div class="session-card" data-start="15:46" data-end="15:54" data-type="break"><div class="color-strip break-strip"></div><div class="session-info"><div class="time-range">03:46 - 03:54</div><div class="session-title">استراحة</div></div></div>
  <div class="session-card" data-start="15:54" data-end="16:34" data-type="study"><div class="color-strip study-strip"></div><div class="session-info"><div class="time-range">03:54 - 04:34</div><div class="session-title">دراسة</div></div></div>
  <div class="session-card" data-start="16:34" data-end="16:42" data-type="break"><div class="color-strip break-strip"></div><div class="session-info"><div class="time-range">04:34 - 04:42</div><div class="session-title">استراحة</div></div></div>

  <div class="session-card dinner-card" data-start="19:00" data-end="20:30" data-type="dinner"><div class="color-strip dinner-strip"></div><div class="session-info"><div class="time-range">07:00 - 08:30</div><div class="session-title">عشاء + راحة</div></div></div>
  <div class="session-card" data-start="20:30" data-end="21:10" data-type="study"><div class="color-strip study-strip"></div><div class="session-info"><div class="time-range">08:30 - 09:10</div><div class="session-title">دراسة</div></div></div>
  <div class="session-card" data-start="21:10" data-end="21:18" data-type="break"><div class="color-strip break-strip"></div><div class="session-info"><div class="time-range">09:10 - 09:18</div><div class="session-title">استراحة</div></div></div>
  <div class="session-card" data-start="21:18" data-end="21:58" data-type="study"><div class="color-strip study-strip"></div><div class="session-info"><div class="time-range">09:18 - 09:58</div><div class="session-title">دراسة</div></div></div>
  <div class="session-card" data-start="21:58" data-end="22:06" data-type="break"><div class="color-strip break-strip"></div><div class="session-info"><div class="time-range">09:58 - 10:06</div><div class="session-title">استراحة</div></div></div>
  <div class="session-card" data-start="22:06" data-end="22:46" data-type="study"><div class="color-strip study-strip"></div><div class="session-info"><div class="time-range">10:06 - 10:46</div><div class="session-title">دراسة</div></div></div>
  <div class="session-card" data-start="22:46" data-end="22:54" data-type="break"><div class="color-strip break-strip"></div><div class="session-info"><div class="time-range">10:46 - 10:54</div><div class="session-title">استراحة</div></div></div>
  <div class="session-card" data-start="22:54" data-end="23:34" data-type="study"><div class="color-strip study-strip"></div><div class="session-info"><div class="time-range">10:54 - 11:34</div><div class="session-title">دراسة</div></div></div>
  <div class="session-card" data-start="23:34" data-end="23:42" data-type="break"><div class="color-strip break-strip"></div><div class="session-info"><div class="time-range">11:34 - 11:42</div><div class="session-title">استراحة</div></div></div>

  <div class="session-card" data-start="23:42" data-end="00:22" data-type="study"><div class="color-strip study-strip"></div><div class="session-info"><div class="time-range">11:42 - 12:22</div><div class="session-title">دراسة</div></div></div>
  <div class="session-card" data-start="00:22" data-end="00:30" data-type="break"><div class="color-strip break-strip"></div><div class="session-info"><div class="time-range">12:22 - 12:30</div><div class="session-title">استراحة</div></div></div>
  <div class="session-card" data-start="00:30" data-end="01:00" data-type="study"><div class="color-strip study-strip"></div><div class="session-info"><div class="time-range">12:30 - 01:00</div><div class="session-title">آخر جلسة</div></div></div>

  <script>
    function toMinutes(time) {
      const [h, m] = time.split(':').map(Number);
      return h * 60 + m;
    }

    function updateTime() {
      const now = new Date();
      const currentMin = now.getHours() * 60 + now.getMinutes();
      
      // تحديث نص الوقت
      document.getElementById("nowText").textContent = "الوقت الآن — " + 
        now.toLocaleTimeString("ar-EG", { hour: "2-digit", minute: "2-digit", hour12: true });

      let currentType = "none";

      document.querySelectorAll('.session-card').forEach(card => {
        card.classList.remove('current');
        const startStr = card.getAttribute('data-start');
        const endStr = card.getAttribute('data-end');
        const type = card.getAttribute('data-type');

        let s = toMinutes(startStr);
        let e = toMinutes(endStr);
        let cur = currentMin;

        // معالجة الوقت بعد منتصف الليل
        if (e < s) e += 24 * 60; 
        if (cur < 11 * 60) cur += 24 * 60; // إذا كنا في الساعات الأولى من الفجر، نعتبرها تابعة لجدول أمس

        if (cur >= s && cur < e) {
          card.classList.add('current');
          currentType = type;
        }
      });

      // تحديث لون الشريط العلوي
      const colors = { study: "#007aff", break: "#34c759", special: "#ff9500", dinner: "#000" };
      document.getElementById("topStatusBar").style.backgroundColor = colors[currentType] || "#e5e5ea";
    }

    updateTime();
    setInterval(updateTime, 10000); // تحديث كل 10 ثوانٍ
  </script>
</body>
</html>
